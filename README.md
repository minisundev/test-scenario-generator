# ğŸ§  í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìë™ ìƒì„±ê¸° (w/ GPT + RAG)

## ğŸ“Œ **ê¸°íš ì˜ë„**

ë°˜ë³µÂ·ìˆ˜ì‘ì—…ì´ë˜ **ë°°í¬ ì „ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±**ì„ **ìƒì„±í˜• AI + RAG**ë¡œ ìë™í™”í•˜ì—¬ ì—…ë¬´ íš¨ìœ¨ì„±ì„ ë†’ì„

**ìƒì„±í˜• AIì™€ RAG ê¸°ìˆ **ì„ í™œìš©í•´, **ì‚¬ë‚´ ë³´ì•ˆ ê·œì¹™ì„ ë°˜ì˜í•œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìë™ ìƒì„± ë„ìš°ë¯¸**ë¥¼ êµ¬ì¶•

### í•µì‹¬ ê¸°ëŠ¥ ìš”ì•½

1. **RAG ê¸°ë°˜ ë³´ì•ˆ ê·œì¹™ ê²€ìƒ‰ ë° ì ìš©**
2. **í”„ë¡ íŠ¸ ì½”ë“œ ë¶„ì„ â†’ UI ìš”ì†Œë³„ ë™ì‘ íŒŒì‹±**
3. **ë°±ì—”ë“œ DTO ë¶„ì„ â†’ ìœ íš¨ì„± ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±**
4. **í…ŒìŠ¤íŠ¸ í…œí”Œë¦¿ ë§ì¶¤ ì ìš©**

## ğŸ¯ ê¸°ëŒ€ íš¨ê³¼

**ì—…ë¬´ íš¨ìœ¨ì„± í–¥ìƒ**

- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„± ì‹œê°„ 70%â†“ (ìˆ˜ë™ 3ì‹œê°„ â†’ ìë™ 30ë¶„)
- ë°°í¬ ì „ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 30%â†‘ (ëˆ„ë½ ì¼€ì´ìŠ¤ ìë™ ë°œê²¬)

**í’ˆì§ˆ í‘œì¤€í™”**

- íšŒì‚¬ ë³´ì•ˆ ì •ì±… 100% ë°˜ì˜ëœ ì¼ê´€ì„± ìˆëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
- ì‹ ê·œ ê°œë°œìë„ ë² í…Œë‘ ìˆ˜ì¤€ì˜ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ê°€ëŠ¥
- í”„ë¡œì íŠ¸ë³„ í…ŒìŠ¤íŠ¸ í’ˆì§ˆ í¸ì°¨ í•´ì†Œ

**ë¹„ìš© ì ˆê° íš¨ê³¼**

- ë°°í¬ í›„ ë²„ê·¸ ë°œê²¬ ë¹„ìš© ëŒ€ë¹„ ì‚¬ì „ ì˜ˆë°© íš¨ê³¼ (1:10 ë¹„ìœ¨)
- ë°˜ë³µ ì‘ì—… ìµœì†Œí™”ë¡œ ë²ˆì•„ì›ƒ ê°ì†Œ

## ğŸ”§ **í™œìš© ê¸°ìˆ  ë° Azure ì„œë¹„ìŠ¤**

### **Azure OpenAI**

- **GPT-4.1**: ì½”ë“œ ë¶„ì„ ë° í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±
- **text-embedding-ada-002**: ë³´ì•ˆ ê·œì¹™ ë¬¸ì„œ ì„ë² ë”© ìƒì„±

### **Azure AI Search**

- **ë²¡í„° ê²€ìƒ‰ ì—”ì§„**: ë³´ì•ˆ ê·œì¹™ ë¬¸ì„œ RAG ê²€ìƒ‰
- **í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰**: í‚¤ì›Œë“œ + ë²¡í„° ê²€ìƒ‰

### **Azure App Service**

- í”„ë¡ íŠ¸: React ê¸°ë°˜ UI
- í”„ë¡ì‹œ ì„œë²„: Node, Expressë¡œ í”„ë¡ì‹œ ì„œë²„ êµ¬í˜„

### **ì „ì²´ íë¦„**

```
ë³´ì•ˆ ë¬¸ì„œ ì—…ë¡œë“œ â†’ ë¸Œë¼ìš°ì €ì—ì„œ ì„ë² ë”© ìƒì„± â†’ AI Search ì¸ë±ì‹± â†’
ì½”ë“œ ì—…ë¡œë“œ â†’ ë¸Œë¼ìš°ì €ì—ì„œ OpenAI í˜¸ì¶œ â†’ ê´€ë ¨ ë³´ì•ˆ ê·œì¹™ ê²€ìƒ‰ â†’
ì»¨í…ìŠ¤íŠ¸ ìƒì„± â†’ GPT-4 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± â†’ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```

## ğŸ” Workflow

### **1ë‹¨ê³„: ì´ˆê¸° ì„¤ì • (1íšŒ)**

1. **ë³´ì•ˆ ë¬¸ì„œ ì—…ë¡œë“œ**: PDF/Word/MD íŒŒì¼ ë“œë˜ê·¸ ì•¤ ë“œë¡­
2. **ì„ë² ë”©**: Azure OpenAI API í˜¸ì¶œ(text-embedding-ada-002)
3. **ì¸ë±ìŠ¤ êµ¬ì¶•**: Azure AI Search API í˜¸ì¶œë¡œ ì¸ë±ì‹±

### **2ë‹¨ê³„: í…œí”Œë¦¿ ì„¤ì • (íŒ€ë³„ 1íšŒ)**

1. **í…œí”Œë¦¿ í¸ì§‘ê¸°**: ì»¬ëŸ¼ëª…, ì„¤ëª…, ì˜ˆì‹œ ì…ë ¥
2. **ë¹ˆ ì»¬ëŸ¼ ì¶”ê°€**: íšŒì‚¬ ì–‘ì‹ì— ë§ì¶˜ ë¹ˆ ì»¬ëŸ¼ í¬í•¨
3. **localStorage ì €ì¥**: ë¸Œë¼ìš°ì €ì— í…œí”Œë¦¿ ì €ì¥
4. **JSON ë‚´ë³´ë‚´ê¸°**: íŒ€ì›ë“¤ê³¼ í…œí”Œë¦¿ ê³µìœ 

### 3ë‹¨ê³„: ì‹¤ì œ ì‚¬ìš© (ë§¤ë²ˆ)

1. í…œí”Œë¦¿ ì„ íƒ: ì €ì¥ëœ í…œí”Œë¦¿ ì¤‘ ì„ íƒ
2. ì½”ë“œ ì—…ë¡œë“œ: ë¶„ì„í•  ì½”ë“œ ì—…ë¡œë“œ
3. GPT-4 ì½”ë“œ ë¶„ì„: Azure OpenAI API í˜¸ì¶œë¡œ ë³´ì•ˆ í‚¤ì›Œë“œ ì¶”ì¶œ
4. ë³´ì•ˆ ê·œì¹™ ê²€ìƒ‰: GPT ì‘ë‹µ + Azure AI Search í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ê²°ê³¼ í™œìš©
5. í…œí”Œë¦¿ ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±: ì„ íƒí•œ í…œí”Œë¦¿ êµ¬ì¡°ì— ë§ì¶° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„±
6. ì»¤ìŠ¤í…€ ì¬ìƒì„±: ì‘ë‹µ ê²°ê³¼ë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ëŠ” í”„ë¡¬í”„íŠ¸ë¥¼ ë¶™ì—¬ì„œ ì¬ìƒì„±
7. ë‹¤ìš´ë¡œë“œ: Markdown / CSV / JSONìœ¼ë¡œ ì¶”ì¶œ

---

## ğŸ—ï¸ ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜
![image](/sample/image.png)

- **ë¹„ìš©ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ Blob storageë¥¼ ë¶™ì´ì§€ ì•Šê³  ì‚¬ìš©**
- **DBë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  Azure AI Search ì¸ë±ìŠ¤ë¥¼ ì§ì ‘ ì‚¬ìš©**í•¨ìœ¼ë¡œì¨ ìš´ì˜ ë¹„ìš©ì„ ì ˆê°í•˜ê³  êµ¬ì„± ê°„ê²°í™”
    
    ```tsx
    app.get('/api/search/index/status', async (req, res) => {
      try {
        const indexName = 'security-docs-index';
        
        console.log('ğŸ“Š ì¸ë±ìŠ¤ ìƒíƒœ í™•ì¸ ìš”ì²­');
    
        // 1. ì¸ë±ìŠ¤ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
        const indexUrl = `${process.env.AZURE_SEARCH_ENDPOINT}/indexes/${indexName}?api-version=2023-11-01`;
        const indexResponse = await fetch(indexUrl, {
          method: 'GET',
          headers: {
            'api-key': process.env.AZURE_SEARCH_API_KEY,
          },
        });
    
        if (!indexResponse.ok) {
          // ì¸ë±ìŠ¤ê°€ ì—†ìœ¼ë©´ 404
          if (indexResponse.status === 404) {
            console.log('â„¹ï¸ ì¸ë±ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ');
            return res.json({
              exists: false,
              documentCount: 0,
              embeddingCount: 0,
              indexSize: 0,
              lastUpdate: null
            });
          }
          
          const errorText = await indexResponse.text();
          console.error('ì¸ë±ìŠ¤ í™•ì¸ ì˜¤ë¥˜:', indexResponse.status, errorText);
          return res.status(indexResponse.status).json({ error: errorText });
        }
    ```
    
- **ë¸Œë¼ìš°ì € ê¸°ë°˜ ì„ë² ë”© ìƒì„±** â†’ Azure AI Searchì— ì§ì ‘ ì¸ë±ì‹±
- ê¸°ì¡´ ì¸ë±ìŠ¤ ìƒíƒœë¥¼ ì²´í¬í•˜ê³  **ì¬ì‚¬ìš© ì—¬ë¶€ë¥¼ ì‚¬ìš©ìì—ê²Œ ì„ íƒí•˜ê²Œ í•˜ì—¬ ë¹„ìš© ìµœì†Œí™”**

- í…œí”Œë¦¿ë„ JSON ë‚´ë³´ë‚´ê¸° ë“±ì„ ì´ìš©í•˜ì—¬ DBë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ

---

## ğŸ’» ë°°í¬ ì •ë³´

- í”„ë¡ íŠ¸ì—”ë“œ:
    
    ğŸ‘‰ https://dopaminesun-web-app-hxd2dab2d2hwa0d0.eastus2-01.azurewebsites.net
    
- í”„ë¡ì‹œ ì„œë²„:
    
    ğŸ‘‰ [https://dopaminesun-server-dycxgacfcmbcc2ec.eastus2-01.azurewebsites.net](https://dopaminesun-server-dycxgacfcmbcc2ec.eastus2-01.azurewebsites.net/)
    

---

## ğŸ§  í”„ë¡¬í”„íŠ¸ ì •ë¦¬

### 1ï¸âƒ£ ì½”ë“œ ë¶„ì„ í”„ë¡¬í”„íŠ¸ (GPTì—ê²Œ ì½”ë“œ ì˜ë¯¸ íŒŒì•… ì‹œ ìš”ì²­)

> ğŸ” ìš©ë„: analyzeCode() ë‚´ì—ì„œ ì½”ë“œ íŒŒì¼ë“¤ì„ ì²­í¬ë¡œ ë‚˜ëˆ ì„œ ë¶„ì„í•  ë•Œ ì‚¬ìš©
> 

```
ë‹¤ìŒ ì½”ë“œ ì¡°ê°ì„ ë¶„ì„í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”.
(ì´ê²ƒì€ ì „ì²´ ì½”ë“œì˜ {i + 1}/{chunks.length} ë¶€ë¶„ì…ë‹ˆë‹¤)

ì½”ë“œ:
```

[ì—¬ê¸°ì— ì½”ë“œ ì²­í¬ ì‚½ì…]

```
ë°˜ë“œì‹œ ë‹¤ìŒ í˜•íƒœì˜ ìœ íš¨í•œ JSONìœ¼ë¡œë§Œ ì‘ë‹µí•´ì£¼ì„¸ìš”. ë‹¤ë¥¸ ì„¤ëª…ì´ë‚˜ í…ìŠ¤íŠ¸ëŠ” í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”:

{
  "keywords": ["ë³´ì•ˆ ê´€ë ¨ í‚¤ì›Œë“œ ë°°ì—´"],
  "uiElements": ["UI ì»´í¬ë„ŒíŠ¸ë‚˜ í¼ ìš”ì†Œ ë°°ì—´"],
  "backendApis": ["API ì—”ë“œí¬ì¸íŠ¸ ë°°ì—´"],
  "securityConcerns": ["ë³´ì•ˆ ê´€ë ¨ ìš°ë ¤ì‚¬í•­ ë°°ì—´"],
  "functions": ["ì£¼ìš” í•¨ìˆ˜ëª… ë°°ì—´"],
  "components": ["React ì»´í¬ë„ŒíŠ¸ëª… ë°°ì—´"]
}
```

---

### 2ï¸âƒ£ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± í”„ë¡¬í”„íŠ¸ (ì½”ë“œ ë¶„ì„ + RAG ê²°ê³¼ ê¸°ë°˜ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±)

> ğŸš€ ìš©ë„: generateTestScenarios() ë‚´ì—ì„œ GPTë¡œ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± ìš”ì²­í•  ë•Œ ì‚¬ìš©
> 

```
ë‹¤ìŒ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‹¤ë¬´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.

## í…œí”Œë¦¿ êµ¬ì¡°:
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ID: ê³ ìœ  ì‹ë³„ì (ì˜ˆ: TC001)
- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: í…ŒìŠ¤íŠ¸ ë‚´ìš© (ì˜ˆ: ë¡œê·¸ì¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸)
- ë³´ì•ˆ ê·œì¹™: ì ìš©ëœ ë³´ì•ˆ ê·œì¹™ (ì˜ˆ: íŒ¨ìŠ¤ì›Œë“œ ì •ì±…)
- ì˜ˆìƒ ê²°ê³¼: ê¸°ëŒ€í•˜ëŠ” ê²°ê³¼ (ì˜ˆ: ë¡œê·¸ì¸ ì„±ê³µ)
- ì‚¬ì „ ì¡°ê±´: í…ŒìŠ¤íŠ¸ ì „ ì¤€ë¹„ ìƒíƒœ (ì˜ˆ: ì‚¬ìš©ì ê³„ì • ì¡´ì¬)
- í…ŒìŠ¤íŠ¸ ë‹¨ê³„: ë‹¨ê³„ë³„ ì ˆì°¨ (ì˜ˆ: ["ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™", "ë¹„ë°€ë²ˆí˜¸ ì…ë ¥", "ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­"])

## ì½”ë“œ ë¶„ì„ ê²°ê³¼:
- ë³´ì•ˆ í‚¤ì›Œë“œ: login, password
- UI ìš”ì†Œ: LoginButton, PasswordField
- API ì—”ë“œí¬ì¸íŠ¸: POST /auth/login
- ë³´ì•ˆ ìš°ë ¤ì‚¬í•­: ì¸ì¦ ë¯¸í¡, ë¹„ë°€ë²ˆí˜¸ ë…¸ì¶œ ê°€ëŠ¥ì„±
- ì£¼ìš” í•¨ìˆ˜: handleLogin, validatePassword
- ì»´í¬ë„ŒíŠ¸: LoginForm

## ì ìš©í•  ë³´ì•ˆ ê·œì¹™ (RAG ê²€ìƒ‰ ê²°ê³¼):
### íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥ ê²€ì¦
ì¹´í…Œê³ ë¦¬: ì¸ì¦
ë‚´ìš©: ì‚¬ìš©ìë¡œë¶€í„° ì…ë ¥ë°›ì€ íŒ¨ìŠ¤ì›Œë“œëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•˜ë©°, ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•œë‹¤...

### ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜ ì œí•œ
ì¹´í…Œê³ ë¦¬: ì ‘ê·¼ ì œì–´
ë‚´ìš©: ë™ì¼í•œ IP ë˜ëŠ” ì‚¬ìš©ì IDë¡œ 5íšŒ ì´ìƒ ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì¼ì‹œì ìœ¼ë¡œ ì°¨ë‹¨ë˜ì–´ì•¼ í•œë‹¤...

ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ” ìµœì†Œ 5~7ê°œì˜ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±í•˜ì„¸ìš”:
1. ìœ„ì—ì„œ ê²€ìƒ‰ëœ ë³´ì•ˆ ê·œì¹™ë“¤ì„ ì‹¤ì œë¡œ ì ìš©í•œ ì‹œë‚˜ë¦¬ì˜¤
2. ì½”ë“œ ë¶„ì„ì—ì„œ ë°œê²¬ëœ APIì™€ í•¨ìˆ˜ë“¤ì„ í™œìš©í•œ ì‹œë‚˜ë¦¬ì˜¤
3. ì‹¤ë¬´ì—ì„œ ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ë‚´ìš©

ë°˜ë“œì‹œ ë‹¤ìŒê³¼ ê°™ì€ **ìœ íš¨í•œ JSON ë°°ì—´ í˜•íƒœë¡œë§Œ** ì‘ë‹µí•´ì£¼ì„¸ìš”:

[
  {
    "í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ID": "TC001",
    "í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤": "ë¹„ë°€ë²ˆí˜¸ ì •ì±… ê²€ì¦",
    "ë³´ì•ˆ ê·œì¹™": "íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥ ê²€ì¦",
    "ì˜ˆìƒ ê²°ê³¼": "8ì ë¯¸ë§Œ ë¹„ë°€ë²ˆí˜¸ëŠ” ê±°ë¶€ë¨",
    "ì‚¬ì „ ì¡°ê±´": "ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í¼ ì¡´ì¬",
    "í…ŒìŠ¤íŠ¸ ë‹¨ê³„": ["í˜ì´ì§€ ì§„ì…", "ë¹„ë°€ë²ˆí˜¸ 5ìë¦¬ ì…ë ¥", "ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸"]
  }
]

```

---

### 3ï¸âƒ£ ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ê¸°ë°˜ ì¬ìƒì„± í”„ë¡¬í”„íŠ¸

> ğŸ” ìš©ë„: ì‚¬ìš©ìê°€ ì§ì ‘ ì¶”ê°€ ìš”êµ¬ì‚¬í•­ ì…ë ¥ í›„ ì¬ìƒì„±í•  ë•Œ ì‚¬ìš©
> 
> 
> ğŸ“¥ ì»¤ìŠ¤í…€ ì…ë ¥ í¬í•¨
> 

```
ë‹¤ìŒ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‹¤ë¬´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.

## í…œí”Œë¦¿ êµ¬ì¡°:
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ID: ê³ ìœ  ì‹ë³„ì (ì˜ˆ: TC001)
- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: í…ŒìŠ¤íŠ¸ ë‚´ìš© (ì˜ˆ: ë¡œê·¸ì¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸)
- ë³´ì•ˆ ê·œì¹™: ì ìš©ëœ ë³´ì•ˆ ê·œì¹™ (ì˜ˆ: íŒ¨ìŠ¤ì›Œë“œ ì •ì±…)
- ì˜ˆìƒ ê²°ê³¼: ê¸°ëŒ€í•˜ëŠ” ê²°ê³¼ (ì˜ˆ: ë¡œê·¸ì¸ ì„±ê³µ)

## ì½”ë“œ ë¶„ì„ ê²°ê³¼:
- ë³´ì•ˆ í‚¤ì›Œë“œ: ${codeAnalysis.keywords.join(', ')}
- UI ìš”ì†Œ: ${codeAnalysis.uiElements.join(', ')}
- API ì—”ë“œí¬ì¸íŠ¸: ${codeAnalysis.backendApis.join(', ')}
- ë³´ì•ˆ ìš°ë ¤ì‚¬í•­: ${codeAnalysis.securityConcerns.join(', ')}
- ì£¼ìš” í•¨ìˆ˜: ${codeAnalysis.functions.join(', ')}
- ì»´í¬ë„ŒíŠ¸: ${codeAnalysis.components.join(', ')}

## ì ìš©í•  ë³´ì•ˆ ê·œì¹™ (RAG ê²€ìƒ‰ ê²°ê³¼):
${securityRules.map(rule => `### ${rule.title}\nì¹´í…Œê³ ë¦¬: ${rule.category}\në‚´ìš©: ${rule.content.substring(0, 500)}...`).join('\n')}

## ğŸ”¥ ì‚¬ìš©ì ì¶”ê°€ ìš”êµ¬ì‚¬í•­ ğŸ”¥
${customPrompt}

ìœ„ì˜ ëª¨ë“  ì •ë³´ì™€ íŠ¹íˆ ì‚¬ìš©ìì˜ ì¶”ê°€ ìš”êµ¬ì‚¬í•­ì„ ë°˜ë“œì‹œ ë°˜ì˜í•˜ì—¬ ìµœì†Œ 5-7ê°œì˜ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±í•˜ì„¸ìš”.

ë°˜ë“œì‹œ ë‹¤ìŒê³¼ ê°™ì€ ìœ íš¨í•œ JSON ë°°ì—´ í˜•íƒœë¡œë§Œ ì‘ë‹µí•´ì£¼ì„¸ìš”:

[
  {
    "í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ID": "TC001",
    "í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤": "êµ¬ì²´ì ì¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë‚´ìš©",
    "ë³´ì•ˆ ê·œì¹™": "ì ìš©ëœ ë³´ì•ˆ ê·œì¹™ëª…",
    "ì˜ˆìƒ ê²°ê³¼": "ì˜ˆìƒë˜ëŠ” ê²°ê³¼"
  }
]

```

---

ëª¨ë“  GPT ìš”ì²­ì€ ë‹¤ìŒê³¼ ê°™ì€ ì‹œìŠ¤í…œ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì „ì†¡

```json
{
  "role": "system",
  "content": "ë‹¹ì‹ ì€ ì†Œí”„íŠ¸ì›¨ì–´ í…ŒìŠ¤íŠ¸ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë³´ì•ˆ ê·œì¹™ì„ ë°˜ì˜í•œ ì •í™•í•˜ê³  ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì „ë¬¸ì…ë‹ˆë‹¤. í•­ìƒ ìœ íš¨í•œ JSON í˜•íƒœë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”."
}

```

ì¬ìƒì„± ìš”ì²­ì€ ë‹¤ìŒê³¼ ê°™ì´ ì „ì†¡

```tsx
{
              role: 'system',
              content: 'ë‹¹ì‹ ì€ ì†Œí”„íŠ¸ì›¨ì–´ í…ŒìŠ¤íŠ¸ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ë³´ì•ˆ ê·œì¹™ì„ ë°˜ì˜í•œ ì •í™•í•˜ê³  ì‹¤ìš©ì ì¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì „ë¬¸ì…ë‹ˆë‹¤. í•­ìƒ ìœ íš¨í•œ JSON í˜•íƒœë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”.'
            },
            {
              role: 'user',
              content: enhancedPrompt
            }
```
### RAG ê²€ìƒ‰
```tsx
// í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
app.post('/api/search/hybrid-search', async (req, res) => {
  try {
    const { 
      query, 
      queryVector, 
      top = 5, 
      select,
      highlight,
      highlightPreTag = '<mark>',
      highlightPostTag = '</mark>',
      searchMode = 'any'
    } = req.body;
    
    const indexName = 'security-docs-index';
    const url = `${process.env.AZURE_SEARCH_ENDPOINT}/indexes/${indexName}/docs/search?api-version=2024-03-01-preview`;
    
    const searchBody = {
      search: query || '*',
      top: top,
      select: select || 'id,title,filename,category',
      searchMode: searchMode,
      queryType: 'full',
      searchFields: 'title,content,category'
    };

    // í•˜ì´ë¼ì´íŠ¸ ì„¤ì • ì¶”ê°€
    if (highlight) {
      searchBody.highlight = highlight;
      searchBody.highlightPreTag = highlightPreTag;
      searchBody.highlightPostTag = highlightPostTag;
    }

    // ë²¡í„° ê²€ìƒ‰ ì¶”ê°€ (í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰)
    if (queryVector && queryVector.length > 0) {
      searchBody.vectors = [
        {
          value: queryVector,
          fields: 'contentVector',
          k: top
        }
      ];
    }
    
    console.log('í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ìš”ì²­:', url);
    console.log('ê²€ìƒ‰ ë³¸ë¬¸:', JSON.stringify(searchBody, null, 2));
    
    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'api-key': process.env.AZURE_SEARCH_API_KEY,
      },
      body: JSON.stringify(searchBody),
    });

    if (!response.ok) {
      const errorText = await response.text();
      console.error('í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì˜¤ë¥˜:', response.status, errorText);
      return res.status(response.status).json({ error: errorText });
    }

    const data = await response.json();
    console.log('Azure Search ì‘ë‹µ:', JSON.stringify(data, null, 2));
    
    // ê²°ê³¼ í›„ì²˜ë¦¬ - content ìš”ì•½ ë° í•˜ì´ë¼ì´íŠ¸ ì²˜ë¦¬
    const results = data.value.map((item, index) => {
      let processedContent = '';
      
      // í•˜ì´ë¼ì´íŠ¸ëœ contentê°€ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ì‚¬ìš©
      if (item['@search.highlights'] && item['@search.highlights'].content) {
        processedContent = item['@search.highlights'].content
          .slice(0, 3) // ìƒìœ„ 3ê°œ í•˜ì´ë¼ì´íŠ¸ë§Œ
          .join('... ')
          .substring(0, 800) + '...';
      } else if (item.content) {
        // í•˜ì´ë¼ì´íŠ¸ê°€ ì—†ìœ¼ë©´ ì›ë³¸ content ìš”ì•½
        processedContent = summarizeContent(item.content, 800);
      }
      
      return {
        id: item.id || `result_${index}`,
        title: item.title || 'ì œëª© ì—†ìŒ',
        content: processedContent,
        filename: item.filename || '',
        category: item.category || 'ì¼ë°˜',
        relevance: normalizeRelevanceScore(item['@search.score']),
        '@search.score': item['@search.score'],
        '@search.highlights': item['@search.highlights']
      };
    });

    console.log(`ê²€ìƒ‰ ê²°ê³¼ í›„ì²˜ë¦¬ ì™„ë£Œ: ${results.length}ê°œ`);
    res.json({ results });
  } catch (error) {
    console.error('í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ í”„ë¡ì‹œ ì˜¤ë¥˜:', error);
    res.status(500).json({ error: error.message });
  }
});

```

```tsx
// í‚¤ì›Œë“œ ê²€ìƒ‰
app.post('/api/search/keyword-search', async (req, res) => {
  try {
    const {
      query,
      top = 5,
      select,
      highlight,
      highlightPreTag = '<mark>',
      highlightPostTag = '</mark>',
      searchMode = 'any'
    } = req.body;

    const indexName = 'security-docs-index';
    const url = `${process.env.AZURE_SEARCH_ENDPOINT}/indexes/${indexName}/docs/search?api-version=2023-11-01`;

    const searchBody = {
      search: query || '*',
      top,
      select: select || 'id,title,filename,category',
      searchMode,
      queryType: 'full',
      searchFields: 'title,content,category'
    };

    if (highlight) {
      searchBody.highlight = highlight;
      searchBody.highlightPreTag = highlightPreTag;
      searchBody.highlightPostTag = highlightPostTag;
    }

    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'api-key': process.env.AZURE_SEARCH_API_KEY,
      },
      body: JSON.stringify(searchBody),
    });

    const data = await response.json();
    const results = (data.value || []).map((item, index) => {
      let processedContent = '';
      if (item['@search.highlights']?.content) {
        processedContent = item['@search.highlights'].content
          .slice(0, 3)
          .join('... ')
          .substring(0, 800) + '...';
      } else {
        processedContent = item.content || '';
      }

      return {
        id: item.id || `keyword_result_${index}`,
        title: item.title || '',
        content: processedContent,
        filename: item.filename || '',
        category: item.category || '',
        relevance: item['@search.score'] || 0
      };
    });

    res.json({ results });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});
```

## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  |
| --- | --- |
| í”„ë¡ íŠ¸ì—”ë“œ | React, TypeScript, Tailwind, Vite |
| ë°±ì—”ë“œ | Node.js, Express, Azure App Service |
| AI | Azure OpenAI (GPT-4, text-embedding-ada-002) |
| ê²€ìƒ‰ | Azure AI Search (Vector + Hybrid Search) |
| ë°°í¬ | Docker, Docker Compose, Azure Web App |

## âš ï¸ í–¥í›„ ê°œì„  ë°©ì•ˆ + í™•ì¥ì„±
- ë²¡í„° ê²€ìƒ‰ ì ìš©
- ì½”ë“œ ì—…ë¡œë“œì‹œ ì•”í˜¸í™”
- ì½”ë“œ ìœ í˜• ë¶„ë¥˜ í•™ìŠµ
- íšŒì‚¬ ì½”ë“œì˜ ì™¸ë¶€ AI ì„œë¹„ìŠ¤ ì „ì†¡ì— ëŒ€í•œ ì •ì±… ìˆ˜ë¦½(Azure private, EntraID ì¸ì¦ ë“±)
- ì‚¬ë‚´ ì„œë¹„ìŠ¤ë¡œ í™œìš© ê°€ëŠ¥ì„±
    - ë³´ì•ˆíŒ€ì—ì„œ rag ì¸ë±ìŠ¤ ìƒì„±
    - ê¸°ìˆ í˜ì‹ ë‹¨ì—ì„œ ì½”ë“œ ìœ í˜• ë¶„ë¥˜ í•™ìŠµ